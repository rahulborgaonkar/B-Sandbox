<apex:page standardController="c2g__codaInvoice__c" recordSetVar="invoices" extensions="ffps_scnbtnb.SalesInvoiceController" action="{!preCheck}" >
    <apex:sectionHeader title="Sales Invoices" subtitle="Post and Email Sales Invoices" />
    <apex:form >
        <apex:pageBlock rendered="{!isComplete}">
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:pageMessages />
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:commandButton value="Back" action="{!cancel}"/>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
        <apex:pageBlock rendered="{!NOT(isComplete)}">
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="You have chosen to post and email a selection of sales invoices. Note that you will be alerted via email when this has been completed."/>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1">
                <apex:pageBlockSectionItem >
                    <apex:outputPanel >
                        <apex:commandButton value="Cancel" action="{!cancel}"/>
                        <apex:outputText value=" "/>
                        <apex:commandButton value="Post and Email" action="{!postAndEmailInvoice}"/>
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>